utility function of version 3